<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Track my order</title>
		<link rel="stylesheet" href="css/track_order.css" />
	</head>
	<body>
		<div>
			Your order: 3
		</div>
		<div class="table-container">
			<table>
				<thead>
					<th>#</th>
					<th>Order Number</th>
					<th>Item</th>
					<th>Quantity</th>
					<th></th>
				</thead>
				<script>
					for (let x = 0; x < 7; x++) {
						document.write(`
                        <tr>
                            <td>1</td>
                            <td>A0001</td>
                            <td>Present Wrapping Paper</td>
                            <td>10</td>
                            <td><button onclick="setprogress(Math.round(Math.random() * 100));">Track</button></td>
				        </tr>
                        `);
					}
				</script>
			</table>
		</div>
		<div id="deliveryProgressBack">
			<div id="sledge-container">
				<img
					src="misc/Sledge.png"
					alt="sledge"
					style="width: 80px; height: 50px;"
				/>
			</div>

			<!-- Both status bar and progress bar and status msg will use the same container to ensure same positioning -->
			<!-- Delivery progress bar -->
			<div id="progressBar"></div>

			<div class="delivery-progress-bar-container">
				<div class="deliery-container-section">
					<div class="outer-circle" id="progress-1">
						<div class="inner-circle"></div>
					</div>
				</div>
				<div class="deliery-container-section">
					<div class="outer-circle" id="progress-2">
						<div class="inner-circle"></div>
					</div>
				</div>
				<div class="deliery-container-section">
					<div class="outer-circle" id="progress-3">
						<div class="inner-circle"></div>
					</div>
				</div>
				<div class="deliery-container-section">
					<div class="outer-circle" id="progress-4">
						<div class="inner-circle"></div>
					</div>
				</div>
			</div>

			<!-- Delivery status msg -->
			<div class="delivery-progress-bar-container">
				<div class="deliery-container-section">
					Ready to be Delivered
				</div>
				<div class="deliery-container-section">
					Picked up by courier
				</div>
				<div class="deliery-container-section">
					Out for delivery
				</div>
				<div class="deliery-container-section">Delivered</div>
			</div>
		</div>
	</body>
	<script src="js/jquery-3.4.1.min.js"></script>
	<script>
		function setprogress(val) {
            val = val / 2;
			var def_transition = $("#progressBar").css("transition");
			// $("#progressBar").css("opacity", "0%");

			$("#progressBar").css("background-position", "right"); // hide the progress bar
			$("#sledge-container").css("padding-left", "20%");

			setTimeout(function () {
				$("#progressBar").css(
					"background-image",
					"linear-gradient(to right, lime 0%, lime " +
						Math.round(val) +
						"%, black " +
						Math.round(val) +
						"%, black 50%, black 100%"
				); // change the progress bar
				// $("#progressBar").css("opacity", "100%");
				$("#progressBar").css("transition", "all 1s ease");
				setTimeout(function () {
					$("#progressBar").css("background-position", "left"); // show the progress bar
                    
					let padding_val = (val*2 / 100) * 60 + 20; // padding left from 20 to 80 is equivalent of 0 - 100 as progress
					$("#sledge-container").css(
						"padding-left",
						`${padding_val}%`
					);
                    console.log(`val: ${val}, padding_val: ${padding_val}`);
				}, 500);
			}, 1000);
			$("#progressBar").css("transition", def_transition); // return to default transition
		}
	</script>
</html>
